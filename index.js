(function(){"use strict";function n(e,l,t,m,c,d,u,h){var a=typeof e=="function"?e.options:e;return l&&(a.render=l,a.staticRenderFns=t,a._compiled=!0),{exports:e,options:a}}const i={name:"ImageList",props:{images:{type:Array,default:()=>[]},availableTemplates:{type:Array,default:()=>[]}},data(){return{selectedImage:null,templateDrawer:!1}},watch:{templateDrawer(e){console.log("templateDrawer changed:",e)}},computed:{items(){return this.images.map((e,l)=>({text:e.filename,info:e.parent,link:e.fileUrl,image:{src:e.thumbUrl,cover:!0,back:"pattern"},options:[e.fileUrl&&{icon:"open",text:"Edit...",link:e.fileUrl},{icon:"window",text:"Preview",link:e.url},{icon:"settings",text:"Assign Template‚Ä¶",click:()=>this.openTemplateSelector(e)}].filter(Boolean)}))}},methods:{handleTemplateSubmit(e){const{key:l,template:t}=e;this.$api.post("checker/assign",{key:l,template:t}).then(()=>{panel.notification.success(`Assigned template: ${t}`)}).catch(()=>{panel.notification.error("Failed to assign template")})},openTemplateSelector(e){console.log("üóÉÔ∏è Opening drawer with file ID:",e.id),this.$panel.drawer.open({component:"k-form-drawer",props:{title:"Assign File Template",icon:"image",fields:{filename:{label:"File",type:"info",text:`${e.id}`,theme:"empty",icon:"file",width:"1/1"},template:{label:"Template",type:"select",required:!0,options:this.availableTemplates,value:e.templateInContent||null,width:"1/1",help:"Choose an available file template"},alt:{label:"Alt Text",type:"textarea",buttons:!1,size:"medium",value:`${e.alt}`,width:"1.1"}},value:{key:e.id,template:e.templateInContent||null,alt:e.alt}},on:{submit:this.handleTemplateSubmit.bind(this)}})},closeDrawer(){this.$panel.drawer.close()}},mounted(){console.log("Image props:",this.images),console.log("üé® availableTemplates:",this.availableTemplates)}};var s=function(){var l=this,t=l._self._c;return t("div",[t("k-panel-inside",[t("k-view",{staticClass:"k-images-without-template-view"},[t("k-header",[l._v("Images")]),t("k-section",{attrs:{label:"Images Without a File Blueprint"}},[l.images.length?t("k-items",{attrs:{items:l.items,layout:l.table,sortable:!0}}):t("k-grid",{staticStyle:{"--columns":"1",gap:"0.5rem"}},[t("k-empty",{attrs:{text:"No images found",icon:"image"}})],1)],1)],1)],1)],1)},o=[],r=n(i,s,o);const p=r.exports;panel.plugin("scottboms/template-checker",{components:{"k-image-template-checker":p}})})();
