(function(){"use strict";function n(e,t,a,i,b,v,_,k){var l=typeof e=="function"?e.options:e;return t&&(l.render=t,l.staticRenderFns=a,l._compiled=!0),{exports:e,options:l}}const s={name:"ImageList",props:{images:{type:Array,default:()=>[]},availableTemplates:{type:Array,default:()=>[]}},data(){return{selectedImage:null,templateDrawer:!1}},watch:{templateDrawer(e){}},computed:{items(){return this.images.map((e,t)=>({text:e.filename,info:e.parent,link:e.fileUrl,image:{src:e.thumbUrl,cover:!0,back:"pattern"},options:[e.fileUrl&&{icon:"settings",text:"Assign Templateâ€¦",click:()=>this.openTemplateSelector(e)},{icon:"open",text:"Edit Image...",link:e.fileUrl},{icon:"window",text:"Preview",link:e.url}].filter(Boolean)}))}},methods:{handleTemplateSubmit(e){const{key:t,template:a,alt:i}=e;this.$api.post("checker/assign",{key:t,template:a,alt:i}).then(()=>{panel.drawer.close(),panel.notification.success({message:"Changes saved",timeout:4e3}),panel.view.reload()}).catch(()=>{panel.notification.error({message:"An error occurred",timeout:4e3})})},openTemplateSelector(e){this.$panel.drawer.open({component:"k-form-drawer",props:{title:"Quick Edit",icon:"image",fields:{preview:{label:"Preview",type:"thumbnail",width:"1/1",src:e.thumbUrl,alt:e.alt||"",size:e.size,filename:e.filename},...this.availableTemplates.length===0?{notice:{label:"Notice",type:"info",icon:"info",theme:"warning",text:"No file blueprints are available. You need to create one first."}}:{template:{label:"Template",type:"select",required:!0,disabled:this.availableTemplates.length===0,options:this.availableTemplates,value:e.templateInContent||null,width:"1/1",help:"Choose an available file template"}},alt:{label:"Alt Text",type:"textarea",buttons:!1,size:"medium",value:`${e.alt}`,width:"1/1"},filename:{label:"File",type:"hidden",text:`${e.id}`,width:"1/1"}},value:{key:e.id,template:e.templateInContent||null,alt:e.alt}},on:{submit:this.handleTemplateSubmit.bind(this)}})},closeDrawer(){this.$panel.drawer.close()}},mounted(){}};var r=function(){var t=this,a=t._self._c;return a("div",[a("k-panel-inside",[a("k-view",{staticClass:"k-images-without-template-view"},[a("k-header",[t._v("Images")]),a("k-section",{attrs:{label:"Images Without a File Blueprint"}},[t.images.length?a("k-items",{attrs:{items:t.items,layout:t.table,sortable:!0}}):a("k-grid",{staticStyle:{"--columns":"1",gap:"0.5rem"}},[a("k-empty",{attrs:{text:"No images found",icon:"image"}})],1)],1)],1)],1)],1)},o=[],c=n(s,r,o);const p=c.exports,m={props:{label:String,src:String,alt:String,filename:String,size:String}};var d=function(){var t=this,a=t._self._c;return a("k-field",{attrs:{label:t.label}},[a("k-item",{attrs:{image:{src:t.src},text:t.filename,info:t.size}})],1)},u=[],f=n(m,d,u);const h=f.exports;panel.plugin("scottboms/template-checker",{components:{"k-image-template-checker":p},fields:{thumbnail:h}})})();
