(function(){"use strict";function i(e,a,t,n,m,d,u,h){var l=typeof e=="function"?e.options:e;return a&&(l.render=a,l.staticRenderFns=t,l._compiled=!0),{exports:e,options:l}}const s={name:"ImageList",props:{images:{type:Array,default:()=>[]},availableTemplates:{type:Array,default:()=>[]}},data(){return{selectedImage:null,templateDrawer:!1}},watch:{templateDrawer(e){}},computed:{items(){return this.images.map((e,a)=>({text:e.filename,info:e.parent,link:e.fileUrl,image:{src:e.thumbUrl,cover:!0,back:"pattern"},options:[e.fileUrl&&{icon:"settings",text:"Assign Templateâ€¦",click:()=>this.openTemplateSelector(e)},{icon:"open",text:"Edit Image...",link:e.fileUrl},{icon:"window",text:"Preview",link:e.url}].filter(Boolean)}))}},methods:{handleTemplateSubmit(e){const{key:a,template:t,alt:n}=e;this.$api.post("checker/assign",{key:a,template:t,alt:n}).then(()=>{panel.drawer.close(),panel.notification.success({message:"Changes saved",timeout:4e3}),panel.view.reload()}).catch(()=>{panel.notification.error({message:"An error occurred",timeout:4e3})})},openTemplateSelector(e){this.$panel.drawer.open({component:"k-form-drawer",props:{title:"Quick Edit",icon:"image",fields:{filename:{label:"File",type:"hidden",text:`${e.id}`,width:"1/1"},template:{label:"Template",type:"select",required:!0,options:this.availableTemplates,value:e.templateInContent||null,width:"1/1",help:"Choose an available file template"},alt:{label:"Alt Text",type:"textarea",buttons:!1,size:"medium",value:`${e.alt}`,width:"1.1"}},value:{key:e.id,template:e.templateInContent||null,alt:e.alt}},on:{submit:this.handleTemplateSubmit.bind(this)}})},closeDrawer(){this.$panel.drawer.close()}},mounted(){}};var o=function(){var a=this,t=a._self._c;return t("div",[t("k-panel-inside",[t("k-view",{staticClass:"k-images-without-template-view"},[t("k-header",[a._v("Images")]),t("k-section",{attrs:{label:"Images Without a File Blueprint"}},[a.images.length?t("k-items",{attrs:{items:a.items,layout:a.table,sortable:!0}}):t("k-grid",{staticStyle:{"--columns":"1",gap:"0.5rem"}},[t("k-empty",{attrs:{text:"No images found",icon:"image"}})],1)],1)],1)],1)],1)},r=[],p=i(s,o,r);const c=p.exports;panel.plugin("scottboms/template-checker",{components:{"k-image-template-checker":c}})})();
